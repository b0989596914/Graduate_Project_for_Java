"@GetMapping(\"/downloadFile/{fileName:.+}\")\r\npublic ResponseEntity<Resource> downloadFile(@PathVariable String fileName, HttpServletRequest request) {\r\n    // Load file as Resource\r\n    Resource resource = fileStorageService.loadFileAsResource(fileName);\r\n    // Try to determine file's content type\r\n    String contentType = null;\r\n    try {\r\n        contentType = request.getServletContext().getMimeType(resource.getFile().getAbsolutePath());\r\n    } catch (IOException ex) {\r\n        logger.info(\"Could not determine file type.\");\r\n    }\r\n    // Fallback to the default content type if type could not be determined\r\n    if (contentType == null) {\r\n        contentType = \"application/octet-stream\";\r\n    }\r\n    return ResponseEntity.ok().contentType(MediaType.parseMediaType(contentType)).header(HttpHeaders.CONTENT_DISPOSITION, \"attachment; filename=\\\"\" + resource.getFilename() + \"\\\"\").body(resource);\r\n}"